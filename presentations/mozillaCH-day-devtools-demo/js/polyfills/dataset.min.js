!function(){function t(){var t={};return a.call(this.attributes,(function(a){(e=a.name.match(n))&&(t[function(t){return t.replace(i,(function(t,e){return e.toUpperCase()}))}(e[1])]=a.value)})),t}var e,a=[].forEach,n=/^data-(.+)/,i=/\-([a-z])/gi,r=document.createElement("div"),d=!1;null==r.dataset&&(r.addEventListener("DOMAttrModified",(function t(){d=!0,this.removeEventListener("DOMAttrModified",t,!1)}),!1),r.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",d?function(){return this._datasetCache||(this._datasetCache=t.call(this)),this._datasetCache}:t),document.addEventListener("DOMAttrModified",(function(t){delete t.target._datasetCache}),!1))}();