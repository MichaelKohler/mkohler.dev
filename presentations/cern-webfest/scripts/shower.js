/*! For license information please see shower.js.LICENSE.txt */
window.shower=window.shower||function(e,t,i){var r,n={},s=e.location,o=t.body,l=[],d=[],a=!(!e.history||!e.history.pushState);function u(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}return u.prototype={getSlideNumber:function(){return this.number},isLast:function(){return n.slideList.length===this.number+1},isFinished:function(){return this.innerComplete>=this.innerLength},process:function(e){return this.timing?(this.initTimer(e),this):(this.next(e),this)},initTimer:function(e){var t=this;return!!t.timing&&(t.stopTimer(),r=t.isFinished()?setInterval((function(){t.stopTimer(),e.next()}),t.timing*(t.innerLength||1)):setInterval((function(){t.isFinished()?(t.stopTimer(),e.next()):t.next(e)}),t.timing),this)},stopTimer:function(){return r&&(clearInterval(r),r=!1),this},prev:function(e){var i,r=this;return!r.hasInnerNavigation||r.isFinished()||0===r.innerComplete?(e.prev(),!1):!(!(i=t.getElementById(r.id).querySelectorAll(".next.active"))||i.length<1)&&(r.innerComplete>0?(r.innerComplete--,i[i.length-1].classList.remove("active")):e.prev(),this)},next:function(e){var i=this;return!i.hasInnerNavigation||i.isFinished()?(e.next(),!1):(i.isFinished()||(t.getElementById(i.id).querySelectorAll(".next:not(.active)")[0].classList.add("active"),i.innerComplete++),this)}},n._getData=function(e,t){return e.dataset?e.dataset[t]:e.getAttribute("data-"+t)},n.slideList=[],n.init=function(e,i){var r;e=e||".slide",i=i||"div.progress div",l=t.querySelectorAll(e),d=t.querySelector(i);for(var s=0;s<l.length;s++)l[s].id||(l[s].id=s+1),(r=n._getData(l[s],"timing"))&&/^(\d{1,2}:)?\d{1,3}$/.test(r)?(-1!==r.indexOf(":")?(r=r.split(":"),r=1e3*(60*parseInt(r[0],10)+parseInt(r[1],10))):r=1e3*parseInt(r,10),0===r&&(r=!1)):r=!1,n.slideList.push(new u({id:l[s].id,number:s,hasInnerNavigation:null!==l[s].querySelector(".next"),timing:r,innerLength:l[s].querySelectorAll(".next").length,innerComplete:0}));return n},n._getTransform=function(){return"scale("+1/Math.max(o.clientWidth/e.innerWidth,o.clientHeight/e.innerHeight)+")"},n._applyTransform=function(e){return["WebkitTransform","MozTransform","msTransform","OTransform","transform"].forEach((function(t){o.style[t]=e})),!0},n._isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},n._normalizeSlideNumber=function(e){if(!n._isNumber(e))throw new Error("Gimme slide number as Number, baby!");return e<0&&(e=0),e>=n.slideList.length&&(e=n.slideList.length-1),e},n._getSlideIdByEl=function(e){for(;"BODY"!==e.nodeName&&"HTML"!==e.nodeName;){if(e.classList.contains("slide"))return e.id;e=e.parentNode}return""},n._checkInteractiveElement=function(e){return"A"===e.target.nodeName},n.getSlideNumber=function(e){var t,i=n.slideList.length-1;for(""===e&&(t=0);i>=0;--i)if(e===n.slideList[i].id){t=i;break}return t},n.go=function(e,t){var i;if(!n._isNumber(e))throw new Error("Gimme slide number as Number, baby!");return!!n.slideList[e]&&(s.hash=n.getSlideHash(e),n.updateProgress(e),n.updateActiveAndVisitedSlides(e),n.isSlideMode()&&(n.showPresenterNotes(e),(i=n.slideList[e]).timing&&i.initTimer(n)),"function"==typeof t&&t(),e)},n.next=function(e){var t=n.getCurrentSlideNumber();return!!n.slideList[t+1]&&(n.go(t+1),"function"==typeof e&&e(),this)},n._turnNextSlide=function(e){var t=n.getCurrentSlideNumber(),i=n.slideList[t];n.isSlideMode()?(i.stopTimer(),i.next(n)):n.go(t+1),"function"==typeof e&&e()},n.prev=n.previous=function(e){var t=n.getCurrentSlideNumber();return!(t<1||(n.go(t-1),"function"==typeof e&&e(),0))},n._turnPreviousSlide=function(e){var t=n.getCurrentSlideNumber(),i=n.slideList[t];return i.stopTimer(),n.isSlideMode()?i.prev(n):n.go(t-1),"function"==typeof e&&e(),!0},n.first=function(e){var t=n.slideList[n.getCurrentSlideNumber()];t.timing&&t.stopTimer(),n.go(0),"function"==typeof e&&e()},n.last=function(e){var t=n.slideList[n.getCurrentSlideNumber()];t.timing&&t.stopTimer(),n.go(n.slideList.length-1),"function"==typeof e&&e()},n.enterSlideMode=function(e){var t=n.getCurrentSlideNumber();return o.classList.remove("list"),o.classList.add("full"),n.isListMode()&&a&&history.pushState(null,null,s.pathname+"?full"+n.getSlideHash(t)),n._applyTransform(n._getTransform()),"function"==typeof e&&e(),!0},n.enterListMode=function(e){var t;return o.classList.remove("full"),o.classList.add("list"),n.clearPresenterNotes(),!n.isListMode()&&(t=n.getCurrentSlideNumber(),n.slideList[t].stopTimer(),n.isSlideMode()&&a&&history.pushState(null,null,s.pathname+n.getSlideHash(t)),n.scrollToSlide(t),n._applyTransform("none"),"function"==typeof e&&e(),!0)},n.toggleMode=function(e){return n.isListMode()?n.enterSlideMode():n.enterListMode(),"function"==typeof e&&e(),!0},n.getCurrentSlideNumber=function(){for(var e=n.slideList.length-1,t=s.hash.substr(1);e>=0;--e)if(t===n.slideList[e].id)return e;return-1},n.scrollToSlide=function(i){var r,s=!1;if(!n._isNumber(i))throw new Error("Gimme slide number as Number, baby!");if(n.isSlideMode())throw new Error("You can't scroll to because you in slide mode. Please, switch to list mode.");if(-1===i)return s;if(!n.slideList[i])throw new Error("There is no slide with number "+i);return r=t.getElementById(n.slideList[i].id),e.scrollTo(0,r.offsetTop),!0},n.isListMode=function(){return a?!/^full.*/.test(s.search.substr(1)):o.classList.contains("list")},n.isSlideMode=function(){return a?/^full.*/.test(s.search.substr(1)):o.classList.contains("full")},n.updateProgress=function(e){if(null===d)return!1;if(!n._isNumber(e))throw new Error("Gimme slide number as Number, baby!");return d.style.width=(100/(n.slideList.length-1)*n._normalizeSlideNumber(e)).toFixed(2)+"%",!0},n.updateActiveAndVisitedSlides=function(e){var i,r,s=n.slideList.length;if(e=n._normalizeSlideNumber(e),!n._isNumber(e))throw new Error("Gimme slide number as Number, baby!");for(i=0;i<s;++i)r=t.getElementById(n.slideList[i].id),i<e?(r.classList.remove("active"),r.classList.add("visited")):i>e?(r.classList.remove("visited"),r.classList.remove("active")):(r.classList.remove("visited"),r.classList.add("active"));return!0},n.clearPresenterNotes=function(){e.console&&e.console.clear&&console.clear()},n.showPresenterNotes=function(i){if(n.clearPresenterNotes(),e.console){i=n._normalizeSlideNumber(i);var r=n.slideList[i].id,s=n.slideList[i+1]?n.slideList[i+1].id:null,o=t.getElementById(r).querySelector("footer");if(o&&o.innerHTML&&console.info(o.innerHTML.replace(/\n\s+/g,"\n")),s){var l=t.getElementById(s).querySelector("h2");l&&(l=l.innerHTML.replace(/^\s+|<[^>]+>/g,""),console.info("NEXT: "+l))}}},n.getSlideHash=function(e){if(!n._isNumber(e))throw new Error("Gimme slide number as Number, baby!");return e=n._normalizeSlideNumber(e),"#"+n.slideList[e].id},e.addEventListener("DOMContentLoaded",(function(){(o.classList.contains("full")||n.isSlideMode())&&(n.go(n.getCurrentSlideNumber()),n.enterSlideMode())}),!1),e.addEventListener("popstate",(function(){n.isListMode()?n.enterListMode():n.enterSlideMode()}),!1),e.addEventListener("resize",(function(){n.isSlideMode()&&n._applyTransform(n._getTransform())}),!1),t.addEventListener("keydown",(function(e){var t,i=n.getCurrentSlideNumber(),r=n.slideList[-1!==i?i:0];switch(e.which){case 80:n.isListMode()&&e.altKey&&e.metaKey&&(e.preventDefault(),t=r.number,n.go(t),n.enterSlideMode(),n.showPresenterNotes(t),r.timing&&r.initTimer(n));break;case 116:e.preventDefault(),n.isListMode()?(t=e.shiftKey?r.number:0,n.go(t),n.enterSlideMode(),n.showPresenterNotes(t),r.timing&&r.initTimer(n)):n.enterListMode();break;case 13:n.isListMode()&&-1!==i&&(e.preventDefault(),n.enterSlideMode(),n.showPresenterNotes(i),r.timing&&r.initTimer(n));break;case 27:n.isSlideMode()&&(e.preventDefault(),n.enterListMode());break;case 33:case 38:case 37:case 72:case 75:if(e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault(),n._turnPreviousSlide();break;case 34:case 40:case 39:case 76:case 74:if(e.altKey||e.ctrlKey||e.metaKey)return;e.preventDefault(),n._turnNextSlide();break;case 36:e.preventDefault(),n.first();break;case 35:e.preventDefault(),n.last();break;case 9:case 32:e.preventDefault(),n[e.shiftKey?"_turnPreviousSlide":"_turnNextSlide"]()}}),!1),n.init(),t.addEventListener("click",(function(e){var t,i=n.getSlideNumber(n._getSlideIdByEl(e.target));n.isListMode()&&n._getSlideIdByEl(e.target)&&(n.go(i),n.enterSlideMode(),n.showPresenterNotes(i),(t=n.slideList[i]).timing&&t.initTimer(n))}),!1),t.addEventListener("touchstart",(function(t){var i,r=n.getSlideNumber(n._getSlideIdByEl(t.target));n._getSlideIdByEl(t.target)&&(n.isSlideMode()&&!n._checkInteractiveElement(t)&&(t.touches[0].pageX>e.innerWidth/2?n._turnNextSlide():n._turnPreviousSlide()),n.isListMode()&&(n.go(n.getSlideNumber(n._getSlideIdByEl(t.target))),n.enterSlideMode(),n.showPresenterNotes(r),(i=n.slideList[r]).timing&&i.initTimer(n)))}),!1),t.addEventListener("touchmove",(function(e){n.isSlideMode()&&e.preventDefault()}),!1),n}(this,this.document);
//# sourceMappingURL=shower.js.map