var express=require("express"),fs=require("fs"),io=require("socket.io"),_=require("underscore"),Mustache=require("mustache"),app=express.createServer(),staticDir=express.static;io=io.listen(app);var opts={port:1947,baseDir:__dirname+"/../../"};io.sockets.on("connection",(function(e){e.on("slidechanged",(function(o){e.broadcast.emit("slidedata",o)})),e.on("fragmentchanged",(function(o){e.broadcast.emit("fragmentdata",o)}))})),app.configure((function(){["css","js","images","plugin","lib"].forEach((function(e){app.use("/"+e,staticDir(opts.baseDir+e))}))})),app.get("/",(function(e,o){fs.createReadStream(opts.baseDir+"/index.html").pipe(o)})),app.get("/notes/:socketId",(function(e,o){fs.readFile(opts.baseDir+"plugin/notes-server/notes.html",(function(t,s){o.send(Mustache.to_html(s.toString(),{socketId:e.params.socketId}))}))})),app.listen(opts.port||null);var brown="[33m",green="[32m",reset="[0m",slidesLocation="http://localhost"+(opts.port?":"+opts.port:"");console.log(brown+"reveal.js - Speaker Notes"+reset),console.log("1. Open the slides at "+green+slidesLocation+reset),console.log("2. Click on the link your JS console to go to the notes page"),console.log("3. Advance through your slides and your notes will advance automatically");