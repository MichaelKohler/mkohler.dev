!function(e){var t=location.protocol+"//"+location.host;function o(){this.popup=null,this.isPopup=e.opener,this.setupDone()&&(e.addEventListener("message",this.onMessage_.bind(this),!1),e.addEventListener("beforeunload",function(e){this.popup&&this.popup.close()}.bind(this),!1))}o.PRESENTER_MODE_PARAM="presentme",o.prototype.setupDone=function(){for(var t,n=location.search.substring(1).split("&").map((function(e){return e.split("=")})),i=null,s=0;t=n[s];++s)if(t[0].toLowerCase()==o.PRESENTER_MODE_PARAM){i="true"==t[1];break}if(null!==i){if(localStorage.ENABLE_PRESENTOR_MODE=i,!e.history.replaceState)return location.replace(location.pathname),!1;e.history.replaceState({},"",location.pathname)}var a=localStorage.getItem("ENABLE_PRESENTOR_MODE");return a&&JSON.parse(a)&&!this.isPopup&&(this.popup=e.open(location.href,"mywindow","menubar=no,location=yes,resizable=yes,scrollbars=no,status=no"),this.popup.addEventListener("load",function(e){var t=this.popup.document.createEvent("Event");t.initEvent("keydown",!0,!0),t.keyCode="P".charCodeAt(0),this.popup.document.dispatchEvent(t)}.bind(this),!1)),!0},o.prototype.onMessage_=function(e){var o=e.data;if(e.origin==t||0==t.indexOf("file://")){if("keyCode"in o){var n=document.createEvent("Event");n.initEvent("keydown",!0,!0),n.keyCode=o.keyCode,document.dispatchEvent(n)}}else alert("Someone tried to postMessage from an unknown origin")},o.prototype.sendMsg=function(t){this.isPopup&&e.opener.postMessage(t,"*")},e.SlideController=o}(window);