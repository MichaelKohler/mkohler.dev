!function(){var e,n=window.location,t=document.body,a=document.querySelectorAll("div.slide"),r=document.querySelector("div.progress div"),i=[],l=a.length;for(e=0;e<l;e++)i.push({id:a[e].id,hasInnerNavigation:null!==a[e].querySelector(".inner")});function o(){return"scale("+1/Math.max(t.clientWidth/window.innerWidth,t.clientHeight/window.innerHeight)+")"}function s(e){t.style.WebkitTransform=e,t.style.MozTransform=e,t.style.msTransform=e,t.style.OTransform=e,t.style.transform=e}function u(){t.className="full",s(o())}function c(){t.className="list",s("none")}function d(){var e,t=i.length,a=n.hash.substr(1);for(e=0;e<t;++e)if(a===i[e].id)return e;return-1}function f(e){if(-1!==e){var n=document.getElementById(i[e].id);null!=n&&window.scrollTo(0,n.offsetTop)}}function h(){return"full"!==n.search.substr(1)}function v(e){return 0>e?i.length-1:i.length<=e?0:e}function m(e){null!==r&&(r.style.width=(100/(i.length-1)*v(e)).toFixed(2)+"%")}function p(e){return"#"+i[v(e)].id}function y(e){n.hash=p(e),h()||m(e)}function w(e){var t=function(e){for(var n=e;"BODY"!==n.nodeName&&"HTML"!==n.nodeName;){if(n.classList.contains("slide"))return n.id;n=n.parentNode}return""}(e.target);""!==t&&h()&&(e.preventDefault(),n.hash="#"+t,history.replaceState(null,null,n.pathname+"?full#"+t),u(),m(d()))}window.addEventListener("DOMContentLoaded",(function(){h()||(-1===d()&&history.replaceState(null,null,n.pathname+"?full"+p(0)),u(),m(d()))}),!1),window.addEventListener("popstate",(function(e){h()?(c(),f(d())):u()}),!1),window.addEventListener("resize",(function(e){h()||s(o())}),!1),document.addEventListener("keydown",(function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=d();switch(e.which){case 116:case 13:h()&&-1!==t&&(e.preventDefault(),history.pushState(null,null,n.pathname+"?full"+p(t)),u(),m(t));break;case 27:h()||(e.preventDefault(),history.pushState(null,null,n.pathname+p(t)),c(),f(t));break;case 33:case 38:case 37:case 72:case 75:e.preventDefault(),y(--t);break;case 34:case 40:case 39:case 76:case 74:e.preventDefault(),-1!==t&&i[t].hasInnerNavigation&&-1!==function(e){if(!0!==i[e].hasInnerNavigation)return-1;var n=document.querySelectorAll(p(e)+" .active"),t=n[n.length-1].nextElementSibling;return null!==t?(t.classList.add("active"),n.length+1):-1}(t)||y(++t);break;case 36:e.preventDefault(),y(t=0);break;case 35:e.preventDefault(),y(t=i.length-1);break;case 9:case 32:e.preventDefault(),y(t+=e.shiftKey?-1:1)}}}),!1),document.addEventListener("click",w,!1),document.addEventListener("touchend",w,!1),document.addEventListener("touchstart",(function(e){if(!h()){var n=d();e.touches[0].pageX>window.innerWidth/2?n++:n--,y(n)}}),!1),document.addEventListener("touchmove",(function(e){h()||e.preventDefault()}),!1)}();